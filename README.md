# ゴルフ場を検索できる  
  
APIモックを作成し検索の条件に沿ったデータを返すようにする  
基準起点と各ゴルフ場の所要時間を DynamoDB に保存する作業をバッチ処理で実行  
  
  
## フロント(クライアント)側  
  
フォームで入力された「日付・ゴルフ場までの所要時間」などの検索条件をもとに API へリクエストし、API から受け取った「条件に合ったゴルフ場」を一覧表示  
  

## バックエンド側（バッチ処理, Lamda/Ruby）  
1. Rakuten API で関東エリア内のゴルフ場を全て取得
2. Google Map API で、出発地点（東京駅や横浜駅）から 1 で取得したそれぞれのゴルフ場までの車での所要時間を取得
3. 1,2 の情報をセットにして DynamoDB に保存
  

## バックエンド(API Gateway/Lamda/Ruby)
1. フロント側から受け取った「日付・ゴルフ場までの所要時間」などの検索条件をもとに Rakuten API で「予約可能なゴルフ場」を取得
2. 1で取得した「予約可能なゴルフ場」とバッチ処理で DynamoDB に保存しておいた「ゴルフ場とそのゴルフ場までの所要時間」のデータを使って条件がマッチしたゴルフ場だけをフロント側へ返す  
  
## ホスティング  
AWS Amplyfy  

## データベース  
DynamoDB  
基準地点から各ゴルフ場までの所要時間」を DynamoDBに保存する  
  
## Lambda とは  
サーバーについて気にすることなくコードを実行できる AWS のサービスの1つ  
Lambda はスケーリングについても自動で行ってくれる  
  
  
## API Gatewayとは
API の作成、管理が簡単にできるサービス  
  
  
## 前提知識
  
```
エンドポイントとは、特定のリソースに対して与えられた固有の一意な URI のこと
```
  

## local で書いたコードを Lambda にアップロードする  
  
local に gem をインストールするために、作成したディレクトリで以下コマンドを実行(ルートで実行しないように注意)
vender/bundle配下にインストールする  

```
--path vendor/bundle
```
  
Lambda にアップロードするためのアップロード対象のファイルを、以下コマンドで zip ファイルに圧縮する  
lambda_function.rbとvenderをfunction.zipという名前の zip ファイルに圧縮  
  
```
zip -r function.zip lambda_function.rb vendor
```
  
AWS/Lambdaにログインし、「アップロード元」「.zipファイル」で作成したzipファイルを保存  
  
コードを修正する場合は、ブラウザ上での修正、または zip ファイルの圧縮・アップロードをもう一度行うことで修正したコードを反映させることができる。（Gemfile を修正する場合は、bundle install --path vendor/bundleを再度行ってアップロードする必要がある）  
  

